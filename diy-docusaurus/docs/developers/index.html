<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><title>DIY for developers · DoItYourself</title><meta name="viewport" content="width=device-width"/><meta name="generator" content="Docusaurus"/><meta name="description" content="Developer users can extend the capabilities of DIY by creating bespoke data models for hosting in the DIY cloud, and updating the data as it flows through the API."/><meta name="docsearch:language" content="en"/><meta property="og:title" content="DIY for developers · DoItYourself"/><meta property="og:type" content="website"/><meta property="og:url" content="https://www.recapt.io/diy-docusaurus/"/><meta property="og:description" content="Developer users can extend the capabilities of DIY by creating bespoke data models for hosting in the DIY cloud, and updating the data as it flows through the API."/><meta property="og:image" content="https://www.recapt.io/diy-docusaurus/img/undraw_online.svg"/><meta name="twitter:card" content="summary"/><meta name="twitter:image" content="https://www.recapt.io/diy-docusaurus/img/undraw_tweetstorm.svg"/><link rel="shortcut icon" href="/diy-docusaurus/img/favicon.ico"/><link rel="stylesheet" href="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.css"/><link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/default.min.css"/><script type="text/javascript" src="https://buttons.github.io/buttons.js"></script><script src="/diy-docusaurus/js/scrollSpy.js"></script><link rel="stylesheet" href="/diy-docusaurus/css/main.css"/><script src="/diy-docusaurus/js/codetabs.js"></script></head><body class="sideNavVisible separateOnPageNav"><div class="fixedHeaderContainer"><div class="headerWrapper wrapper"><header><a href="/diy-docusaurus/"><img class="logo" src="/diy-docusaurus/img/favicon.ico" alt="DoItYourself"/><h2 class="headerTitleWithLogo">DoItYourself</h2></a><div class="navigationWrapper navigationSlider"><nav class="slidingNav"><ul class="nav-site nav-site-internal"><li class="siteNavGroupActive"><a href="/diy-docusaurus/docs/getting-started" target="_self">Docs</a></li><li class=""><a href="https://sandbox-2.doityourself.io/manager" target="_self">Try it out</a></li><li class="siteNavGroupActive"><a href="/diy-docusaurus/docs/videos" target="_self">Videos</a></li><li class="navSearchWrapper reactNavSearchWrapper"><input type="text" id="search_input_react" placeholder="Search" title="Search"/></li></ul></nav></div></header></div></div><div class="navPusher"><div class="docMainWrapper wrapper"><div class="docsNavContainer" id="docsNav"><nav class="toc"><div class="toggleNav"><section class="navWrapper wrapper"><div class="navBreadcrumb wrapper"><div class="navToggle" id="navToggler"><div class="hamburger-menu"><div class="line1"></div><div class="line2"></div><div class="line3"></div></div></div><h2><i>›</i><span>Guides</span></h2><div class="tocToggler" id="tocToggler"><i class="icon-toc"></i></div></div><div class="navGroups"><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">Getting started<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/diy-docusaurus/docs/getting-started">Getting started with DIY</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">Guides<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem navListItemActive"><a class="navItem" href="/diy-docusaurus/docs/developers">DIY for developers</a></li><li class="navListItem"><a class="navItem" href="/diy-docusaurus/docs/administrators">DIY for administrators</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">Examples<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/diy-docusaurus/docs/scenarios">Scenarios</a></li><li class="navListItem"><a class="navItem" href="/diy-docusaurus/docs/videos">Video examples</a></li></ul></div></div></section></div><script>
            var coll = document.getElementsByClassName('collapsible');
            var checkActiveCategory = true;
            for (var i = 0; i < coll.length; i++) {
              var links = coll[i].nextElementSibling.getElementsByTagName('*');
              if (checkActiveCategory){
                for (var j = 0; j < links.length; j++) {
                  if (links[j].classList.contains('navListItemActive')){
                    coll[i].nextElementSibling.classList.toggle('hide');
                    coll[i].childNodes[1].classList.toggle('rotate');
                    checkActiveCategory = false;
                    break;
                  }
                }
              }

              coll[i].addEventListener('click', function() {
                var arrow = this.childNodes[1];
                arrow.classList.toggle('rotate');
                var content = this.nextElementSibling;
                content.classList.toggle('hide');
              });
            }

            document.addEventListener('DOMContentLoaded', function() {
              createToggler('#navToggler', '#docsNav', 'docsSliderActive');
              createToggler('#tocToggler', 'body', 'tocActive');

              var headings = document.querySelector('.toc-headings');
              headings && headings.addEventListener('click', function(event) {
                var el = event.target;
                while(el !== headings){
                  if (el.tagName === 'A') {
                    document.body.classList.remove('tocActive');
                    break;
                  } else{
                    el = el.parentNode;
                  }
                }
              }, false);

              function createToggler(togglerSelector, targetSelector, className) {
                var toggler = document.querySelector(togglerSelector);
                var target = document.querySelector(targetSelector);

                if (!toggler) {
                  return;
                }

                toggler.onclick = function(event) {
                  event.preventDefault();

                  target.classList.toggle(className);
                };
              }
            });
        </script></nav></div><div class="container mainContainer"><div class="wrapper"><div class="post"><header class="postHeader"><h1 class="postHeaderTitle">DIY for developers</h1></header><article><div><span><p>Developer users can extend the capabilities of DIY by creating bespoke data models for hosting in the DIY cloud, and updating the data as it flows through the API.</p>
<h2><a class="anchor" aria-hidden="true" id="create-a-new-data-model"></a><a href="#create-a-new-data-model" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Create a new data model</h2>
<p>You can create your own data models in DIY, which will be hosted in the DIY cloud.</p>
<ol>
<li>In the <strong>API</strong> menu, select <strong>Models</strong> and click <img src="/diy-docusaurus/docs/assets/plus-icon.png" alt="alt-text">.</li>
</ol>
<p><img src="/diy-docusaurus/docs/assets/datamodel9.png" alt="alt-text"></p>
<ol start="2">
<li>Click the <strong>Form</strong> tab or <strong>Editor</strong> tab, then specify the model name (which must be unique and contain no spaces).</li>
</ol>
<p><img src="/diy-docusaurus/docs/assets/datamodel10.png" alt="alt-text"></p>
<ol start="3">
<li>For each of the required properties, click <strong>Add property</strong>, then specify the property name, data type and if it is required.</li>
</ol>
<p><img src="/diy-docusaurus/docs/assets/datamodel11.png" alt="alt-text"></p>
<ol start="4">
<li>Enable user access to your new model in the <strong>Default access control rules</strong> section, by selecting the type of user from the list and toggling the permission button to <strong>Allow</strong>. You can also click <strong>Add access control rules</strong> if you want to add more rules. Note that if you require more specific access control rules, you can create them using the <a href="/diy-docusaurus/docs/administrators/#access-control-rules"><strong>Access control rules</strong></a> function.</li>
</ol>
<p><img src="/diy-docusaurus/docs/assets/datamodel12.png" alt="alt-text"></p>
<ol start="5">
<li>Expand the <strong>Advanced model configuration</strong> section and specify database relations and endpoints.</li>
</ol>
<p><img src="/diy-docusaurus/docs/assets/datamodel7.png" alt="alt-text"></p>
<ol start="6">
<li>Click <strong>Save</strong>. The model is now saved in the list, with the standard set of endpoints available in DIY.</li>
</ol>
<p><img src="/diy-docusaurus/docs/assets/datamodel13.png" alt="alt-text"></p>
<ol start="7">
<li>Click the <strong>Properties</strong> tab to see the properties you defined.</li>
</ol>
<p><img src="/diy-docusaurus/docs/assets/datamodel15.png" alt="alt-text"></p>
<ol start="8">
<li>Expand the endpoints and test them with the <strong>Try it out</strong> feature.</li>
</ol>
<p><img src="/diy-docusaurus/docs/assets/datamodel14.png" alt="alt-text"></p>
<h2><a class="anchor" aria-hidden="true" id="make-real-time-changes-to-your-api-data-flow"></a><a href="#make-real-time-changes-to-your-api-data-flow" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Make real-time changes to your API data flow</h2>
<p>DIY includes a graphical tool for specifying changes to data as it passes through your DIY API flow, which are applied in real time when the API is called. You build your flow definition by connecting together different types of <em>nodes</em>, the building blocks of your API data, which come in different types:</p>
<ul>
<li>input and output nodes</li>
<li>general function nodes</li>
<li>DIY-specific nodes, including specific function nodes designed to interact with DIY data sources and models</li>
</ul>
<p>Each node is a point where you can intercept the data during the flow and change it in some way. For example, if you want to transfer data from one database to another, you can change the format of the source data to suit the format of the destination database. By updating the nodes, not only can you change the format of your API's response data, but you can also redirect the data to, and pull data from, other services along the way.</p>
<p>See the <a href="#node-reference"><strong>Node reference</strong></a> at the bottom of this page for a description of all the nodes available.</p>
<h3><a class="anchor" aria-hidden="true" id="the-tool"></a><a href="#the-tool" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>The tool</h3>
<p>DIY's data flow tool is built on top of IBM's open source Node-RED application, which is a light-weight Node.js tool designed for creating data flows without the need for any coding, while still making it possible to create additional complexity with code, depending on your project's requirements. You can find more information about Node-RED:</p>
<ul>
<li>in this short <a href="https://www.youtube.com/watch?time_continue=13&amp;v=vYreeoCoQPI"><strong>video introduction</strong></a></li>
<li>in the <a href="https://nodered.org/docs/"><strong>Node-RED documentation</strong></a></li>
</ul>
<p>A brief summary of the tool's components is as follows:</p>
<ul>
<li>on the left, the node palette</li>
<li>in the centre, a working area for your flow, into which you drag your nodes, connect them together and double-click on each node to specify its characteristics</li>
<li>on the right, 4 different panes you can toggle between in a menu (the info and debug panes are also accessible from shortcut tabs):
<ul>
<li>the <strong>info</strong> pane, giving context-specific information about the currently selected object -- the working area tab, the selected node, etc.</li>
<li>the <strong>debug</strong> pane, showing the current debug information when the flow includes an output node of type <strong>debug</strong></li>
<li>the <strong>config</strong> pane</li>
<li>the <strong>context</strong> pane</li>
</ul></li>
<li>at the top right, the <strong>Deploy</strong> menu, for deploying your finished flow, and the application menu, for all other application management functions.</li>
</ul>
<p><img src="/diy-docusaurus/docs/assets/dataflowtool.png" alt="alt-text"></p>
<h3><a class="anchor" aria-hidden="true" id="a-simple-data-flow"></a><a href="#a-simple-data-flow" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>A simple data flow</h3>
<p>In this simple example, you can see a basic data flow, with a node representing the AirQuality API GET endpoint we created in our REST API connector <a href="/diy-docusaurus/docs/videos/#How-to-configure-a-rest-api-connector">video example</a>. When we click the small tab on the left of the <strong>timestamp</strong> node to initiate the flow, the <strong>msg payload</strong> debug node displays the output from the flow in the <strong>debug</strong> pane.</p>
<p><img src="/diy-docusaurus/docs/assets/dataflow.png" alt="alt-text"></p>
<p>We haven't added any additional logic yet, so the query response output you see in the <strong>debug</strong> pane is exactly the same as the response you see when you click <strong>Try it out</strong> on the DIY <strong>Models</strong> page (see step 8 of the previous section):</p>
<p><img src="/diy-docusaurus/docs/assets/dataflow2.png" alt="alt-text"></p>
<h3><a class="anchor" aria-hidden="true" id="create-a-new-data-flow"></a><a href="#create-a-new-data-flow" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Create a new data flow</h3>
<p>We will now explain the basic steps for creating a new flow. Then we will show you some practical examples of flows you can create, that you can adapt to your own specific business case.</p>
<ol>
<li>In the <strong>Tools</strong> menu, click <strong>Flow</strong>.</li>
</ol>
<p><img src="/diy-docusaurus/docs/assets/dataflow_menu.png" alt="alt-text"></p>
<p>The graphical interface opens.</p>
<p><img src="/diy-docusaurus/docs/assets/dataflow3.png" alt="alt-text"></p>
<ol start="2">
<li>Click the <img src="/diy-docusaurus/docs/assets/dataflow4.png" alt="alt-text"> tab to create a new flow.</li>
</ol>
<p><img src="/diy-docusaurus/docs/assets/dataflow6.png" alt="alt-text"></p>
<ol start="3">
<li>Double-click the tab and give it a new name. Add a description if required, and click <strong>Done</strong>. The information is displayed in the <strong>info</strong> pane.</li>
</ol>
<p><img src="/diy-docusaurus/docs/assets/dataflow5.png" alt="alt-text"></p>
<ol start="4">
<li>In your new tab, drag your first node into the working area. All flows either begin with an <strong>input</strong> type node, which injects the data into the flow, or a DIY <strong>hooks</strong> node, which executes an operation on your data before injecting it into the flow. In this example we have dragged an <strong>inject</strong> node into the working area and left it as the default <strong>timestamp</strong>; this is the default node which injects the message payload into your flow.<br>
Note that whenever you set the properties of a node, it is displayed with a new name reflecting those properties.</li>
</ol>
<p><img src="/diy-docusaurus/docs/assets/dataflow7.png" alt="alt-text"></p>
<ol start="5">
<li>Choose the next node of your flow, then click and drag between the connector dots of the two nodes to connect them together.</li>
</ol>
<p><img src="/diy-docusaurus/docs/assets/dataflow8.png" alt="alt-text"></p>
<ol start="6">
<li>Double-click on your second node and specify its properties, then click <strong>Done</strong> when you have finished.</li>
</ol>
<p><img src="/diy-docusaurus/docs/assets/dataflow9.png" alt="alt-text"></p>
<p>Note that in this example with the DIY <strong>Methods</strong> node, we do not have to run any additional methods on the data model to output data from it, since our model is a REST API GET endpoint and the GET method is defined as part of the data source itself. If we are working with a model such as an Oracle database, however, we need to specify a <strong>find</strong> method to output data from it.</p>
<p><img src="/diy-docusaurus/docs/assets/dataflow17.png" alt="alt-text"></p>
<ol start="7">
<li>Repeat steps 5 and 6 for all the other nodes you want to add to your flow. Note that if you started your flow with any of the DIY <strong>xxx hooks</strong> type nodes, you must also add a DIY <strong>Hook end</strong> in the flow to show where the hook operation ends.</li>
</ol>
<p><img src="/diy-docusaurus/docs/assets/dataflow10.png" alt="alt-text"></p>
<ol start="8">
<li>To see your flow output in the <strong>debug</strong> pane, add a <strong>debug</strong> output node, leaving the default setting of <strong>msg.payload</strong>.</li>
</ol>
<p><img src="/diy-docusaurus/docs/assets/dataflow11.png" alt="alt-text"></p>
<ol start="9">
<li>Click <strong>Deploy</strong> to deploy your new flow.</li>
</ol>
<p><img src="/diy-docusaurus/docs/assets/dataflow12.png" alt="alt-text"></p>
<p>If your flow is:</p>
<ul>
<li>correctly specified, a <strong>Successfully deployed</strong> message is displayed, and any data flow changes will now be reflected in subsequent calls to the API:</li>
</ul>
<p><img src="/diy-docusaurus/docs/assets/dataflow13.png" alt="alt-text"></p>
<ul>
<li>incorrectly specified, an error is displayed (such as in this example where a <strong>Hook end</strong> node has not been specified with a DIY <strong>xxx hooks</strong> type node) and you need to correct the error before redeploying:</li>
</ul>
<p><img src="/diy-docusaurus/docs/assets/dataflow16.png" alt="alt-text"></p>
<ol start="10">
<li>Once successfully deployed, you can trigger your flow by clicking the tab on the left of the <strong>timestamp</strong> node and see the output message in the <strong>debug</strong> pane.</li>
</ol>
<p><img src="/diy-docusaurus/docs/assets/dataflow14.png" alt="alt-text"></p>
<ol start="11">
<li>Click the message to expand the different sections and see the field details.</li>
</ol>
<p><img src="/diy-docusaurus/docs/assets/dataflow15.png" alt="alt-text"></p>
<h3><a class="anchor" aria-hidden="true" id="examples"></a><a href="#examples" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Examples</h3>
<h4><a class="anchor" aria-hidden="true" id="example-1-extract-data-from-one-diy-data-model-split-the-data-up-transform-it-and-insert-it-into-another-diy-data-model"></a><a href="#example-1-extract-data-from-one-diy-data-model-split-the-data-up-transform-it-and-insert-it-into-another-diy-data-model" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Example 1 - Extract data from one DIY data model, split the data up, transform it and insert it into another DIY data model</h4>
<p>In this example, we're going to retrieve contact data using a <strong>ContactPlaceHolder</strong> REST API <strong>GET contacts</strong> method, split the message up into individual contact records, and insert the records into the <strong>Oracle_Sand_Box_Customers</strong> data model table.</p>
<p>This example introduces the following concepts:</p>
<ul>
<li>the <strong>split</strong> node</li>
<li>Node-RED <a href="https://nodered.org/docs/api/ui/typedInput/"><strong>TypedInput</strong></a>, used in DIY for selecting the type of input format for matching and mapping data</li>
<li>the <a href="http://docs.jsonata.org/overview.html"><strong>JSONata</strong></a> data transformation language, used in DIY for more complex data transformations</li>
</ul>
<p><strong>Data models</strong></p>
<p>This example is based on two data models:</p>
<ul>
<li>a REST API called <strong>ContactPlaceHolder</strong>, with a <strong>GET contacts</strong> method:</li>
</ul>
<p><img src="/diy-docusaurus/docs/assets/dataflowexample1_3.png" alt="alt-text"></p>
<ul>
<li>an Oracle data model called <strong>Oracle_Sand_Box_Customers</strong>:</li>
</ul>
<p><img src="/diy-docusaurus/docs/assets/dataflowexample1_4.png" alt="alt-text"></p>
<p><strong>Step 1 - Build the basic flow</strong></p>
<p>First, we're going to drag in an <strong>inject</strong> node, leaving it with the default <strong>timestamp</strong>, and connect it to a <strong>DIY Methods</strong> node with a <strong>Model</strong> name of <strong>ContactPlaceHolder</strong> and a <strong>Method</strong> name of <strong>contacts</strong>. We'll add in a <strong>debug</strong> node at this point too, so we can already see our output. We need to <strong>Deploy</strong> our first version before we continue.</p>
<p><img src="/diy-docusaurus/docs/assets/dataflowexample1_2.png" alt="alt-text"></p>
<p>Now let's go ahead and click the <strong>timestamp</strong> node and have a look at our output in the <strong>debug</strong> pane.</p>
<p><img src="/diy-docusaurus/docs/assets/dataflowexample1_5.png" alt="alt-text"></p>
<p>We can see the format of our data doesn't match the format of the Oracle table we're inserting it into, so we need to introduce some new nodes to transform the data.</p>
<p><strong>Step 2 - Split the data</strong></p>
<p>We're going to add a <strong>split</strong> node, to split each new line into separate records.</p>
<p><img src="/diy-docusaurus/docs/assets/dataflowexample1_7.png" alt="alt-text"></p>
<p>We double-click on the node and specify the message is to be split into one message per table row.</p>
<p><img src="/diy-docusaurus/docs/assets/dataflowexample1_6.png" alt="alt-text"></p>
<p>When we click <strong>Deploy</strong> then click the <strong>timestamp</strong> node, we can see the message has been split up.</p>
<p><img src="/diy-docusaurus/docs/assets/dataflowexample1_8.png" alt="alt-text"></p>
<p><strong>Step 3 - Transform the data</strong></p>
<p>The next step is to add a new <strong>Methods</strong> node to map the message output from the <strong>split</strong> node to our Oracle data model, and insert the records into the <strong>Oracle_Sand_Box_Customers</strong> data model.</p>
<p><img src="/diy-docusaurus/docs/assets/dataflowexample1_9.png" alt="alt-text"></p>
<p>We're going to use a <strong>create</strong> method. In the <strong>data</strong> menu we choose the <strong>mapping</strong> TypedInput type, then click the ellipsis button to open the editor.</p>
<p><img src="/diy-docusaurus/docs/assets/dataflowexample1_12.png" alt="alt-text"></p>
<p>We are going to map <strong>name</strong>, <strong>address</strong> and <strong>website</strong>, since we know these are the three fields which exist in both data models, so we create three new entries in the editor by clicking <strong>add</strong> three times.</p>
<p><img src="/diy-docusaurus/docs/assets/dataflowexample1_13.png" alt="alt-text">
We choose <strong>msg</strong> as our TypedInput, then set each of the three fields to the values we want to map. We can copy the paths from the <strong>debug</strong> pane to the relevant fields in the message, by using the <strong>copy path</strong> icon and pasting the paths to the mapped fields.</p>
<p><img src="/diy-docusaurus/docs/assets/dataflowexample1_14.png" alt="alt-text"></p>
<p>At this point we realise we can't use the address data in its current form for our Oracle table, as the address format is an object containing multiple lines, and our Oracle database requires it to be a single string. We need to concatenate the different address lines. This is where <a href="http://docs.jsonata.org/overview.html"><strong>JSONata</strong></a> comes in. We choose the <strong>expression</strong> TypedInput and click the ellipsis button to open the JSONata editor.</p>
<p><img src="/diy-docusaurus/docs/assets/dataflowexample1_15.png" alt="alt-text"></p>
<p>We can use JSONata to manipulate the JSON object directly. Click the <strong>Test</strong> tab to help debug your JSONata as you enter it. If you click the <strong>copy object</strong> icon, you can paste the message into the <strong>Example message</strong> window, then every value you enter in the editor is displayed in the <strong>Result</strong> window.</p>
<p><img src="/diy-docusaurus/docs/assets/dataflowexample1_16.png" alt="alt-text"></p>
<p>As you type your JSONata in the editor, you can see the output displayed dynamically in the <strong>Result</strong> window (for more information on the JSONata syntax, and other types of data manipulation you can accomplish using JSONata, see the <a href="http://docs.jsonata.org/overview.html"><strong>JSONata documentation</strong></a>).</p>
<p><img src="/diy-docusaurus/docs/assets/dataflowexample1_17.png" alt="alt-text"></p>
<p>Click <strong>Done</strong>. The JSONata concatenation expression is now visible in the <strong>Model mapping</strong> page.</p>
<p><img src="/diy-docusaurus/docs/assets/dataflowexample1_18.png" alt="alt-text"></p>
<p>An alternative, and better, choice for mapping and inserting the data is an <strong>upsertWithWhere</strong> method, since we can use the <strong>where</strong> clause to test for and update existing records in the Oracle table, rather than creating duplicates.</p>
<p><img src="/diy-docusaurus/docs/assets/dataflowexample1_11.png" alt="alt-text"></p>
<p><strong>Step 4 - Deploy and test</strong></p>
<p>Finally, we can deploy our new data flow -- success! We can see the concatenated address data in the <strong>debug</strong> pane.</p>
<p><img src="/diy-docusaurus/docs/assets/dataflowexample1_10.png" alt="alt-text"></p>
<p>We can then make a test call to the REST ContactPlaceHolder API, and query the <strong>contacts</strong> Oracle database table exposed in the <strong>Oracle_Sand_Box_Customers</strong> data model, to make sure the new contact data was injected into it.</p>
<h3><a class="anchor" aria-hidden="true" id="example-2"></a><a href="#example-2" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Example 2 -</h3>
<p>In this example, we're going to ...</p>
<p>This example introduces some more advanced concepts:</p>
<ul>
<li>the <strong>switch</strong> node</li>
<li>the <strong>link</strong> node-</li>
<li>several different operations you can perform using the <strong>Methods</strong> node.</li>
</ul>
<p>Add newly-created DIY data model?</p>
<ol>
<li></li>
<li></li>
<li></li>
</ol>
<p>(Note that as this is flow is very long, we have used the <strong>link</strong> node to continue it on another line)</p>
<h3><a class="anchor" aria-hidden="true" id="node-reference"></a><a href="#node-reference" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Node reference</h3>
<p>Here you can find a quick reference of each of the nodes available in the DIY data flow tool. You can find a more detailed description of each node type in the tool's <strong>info</strong> pane when you click on the node in the node palette, or in the <a href="https://nodered.org/docs/"><strong>Node-RED documentation</strong></a>.</p>
<table>
<thead>
<tr><th>Node</th><th>Description</th></tr>
</thead>
<tbody>
<tr><td><strong>DIY nodes</strong></td><td>DIY specific nodes</td></tr>
<tr><td>Methods</td><td>Execute a method on a DIY data model; different methods are available for different data model types</td></tr>
<tr><td>Hook end</td><td>Ends any one of the three following <em>hook</em> type nodes</td></tr>
<tr><td>Connector hooks</td><td>For acting on a DIY data source before or after running other methods on it -- for example, you can use a Connector hook followed by a <strong>change</strong> function to change the contents of a message; all subsequent operations performed on data models using the same data source invoke this hook first; always needs an accompanying <strong>Hook end</strong> node</td></tr>
<tr><td>Operation hooks</td><td>For acting on a DIY data model to create a global rule specifying how other methods can be run on it, for example, you can use an Operation hook followed by a <strong>change</strong> node to specify that all subsequent <strong>find</strong> methods must return data ordered in a particular way ; always needs an accompanying <strong>Hook end</strong> node</td></tr>
<tr><td>Remote hooks</td><td>Sane as Operations hooks, but only apply during API calls, not at method level as part of other data flows ; always needs an accompanying <strong>Hook end</strong> node</td></tr>
<tr><td>Storage watch</td><td>For interacting with Storage connector type data sources</td></tr>
<tr><td><strong>input nodes</strong></td><td>Nodes to input data into the next node in the flow</td></tr>
<tr><td>inject</td><td>For triggering a flow, including a payload type and whether the flow is to be automatically triggered at regular intervals</td></tr>
<tr><td>catch</td><td>For catching errors from one or more nodes</td></tr>
<tr><td>status</td><td>For reporting the status of one or more nodes</td></tr>
<tr><td>link</td><td>Used to split long flows into more than one line; this node restarts the flow on the new line (it needs a matching output link node to end the flow on the previous line)</td></tr>
<tr><td><strong>function nodes</strong></td><td>Nodes to execute a function against data passing through the node</td></tr>
<tr><td>function</td><td>For running a new JavaScript function</td></tr>
<tr><td>template</td><td>For setting properties based on a template (Mustache by default)</td></tr>
<tr><td>delay</td><td>For limiting the output rate</td></tr>
<tr><td>trigger</td><td>For triggering specific actions at time intervals</td></tr>
<tr><td>comment</td><td>For adding comments</td></tr>
<tr><td>switch</td><td>For routing the data to different flow branches based on test criteria</td></tr>
<tr><td>change</td><td>For modifying the data's properties and setting context properties</td></tr>
<tr><td>range</td><td>For mapping numeric data to a range</td></tr>
<tr><td>split</td><td>For splitting data into a sequence of messages</td></tr>
<tr><td>join</td><td>For joining sequences of messages into a single message</td></tr>
<tr><td>sort</td><td>For sorting data properties or sequences of messages</td></tr>
<tr><td>batch</td><td>For creating sequences of messages based on specific rules</td></tr>
<tr><td>html</td><td>For extracting HTML elements using a CSS selector</td></tr>
<tr><td>csv, json, xml, yaml</td><td>For converting strings in these formats to their JavaScript object representation</td></tr>
<tr><td><strong>output nodes</strong></td><td>Nodes to end a flow</td></tr>
<tr><td>debug</td><td>Used to display the flow output in the <strong>debug</strong> pane</td></tr>
<tr><td>link</td><td>Used to split long flows into more than one line; this node ends the flow on the first line (it needs a matching input link node to restart the flow on the new line)</td></tr>
</tbody>
</table>
</span></div></article></div><div class="docs-prevnext"><a class="docs-prev button" href="/diy-docusaurus/docs/getting-started"><span class="arrow-prev">← </span><span>Getting started with DIY</span></a><a class="docs-next button" href="/diy-docusaurus/docs/administrators"><span>DIY for administrators</span><span class="arrow-next"> →</span></a></div></div></div><nav class="onPageNav"><ul class="toc-headings"><li><a href="#create-a-new-data-model">Create a new data model</a></li><li><a href="#make-real-time-changes-to-your-api-data-flow">Make real-time changes to your API data flow</a><ul class="toc-headings"><li><a href="#the-tool">The tool</a></li><li><a href="#a-simple-data-flow">A simple data flow</a></li><li><a href="#create-a-new-data-flow">Create a new data flow</a></li><li><a href="#examples">Examples</a></li><li><a href="#example-2">Example 2 -</a></li><li><a href="#node-reference">Node reference</a></li></ul></li></ul></nav></div><footer class="nav-footer" id="footer"><section class="sitemap"><a href="/diy-docusaurus/" class="nav-home"><img src="/diy-docusaurus/img/favicon.ico" alt="DoItYourself" width="66" height="58"/></a><div><h5>Docs</h5><a href="/diy-docusaurus/docs/en/doc1.html">Getting Started (or other categories)</a><a href="/diy-docusaurus/docs/en/doc2.html">Guides (or other categories)</a><a href="/diy-docusaurus/docs/en/doc3.html">API Reference (or other categories)</a></div><div><h5>Community</h5><a href="/diy-docusaurus/en/users.html">User Showcase</a><a href="https://stackoverflow.com/questions/tagged/" target="_blank" rel="noreferrer noopener">Stack Overflow</a><a href="https://discordapp.com/">Project Chat</a><a href="https://twitter.com/" target="_blank" rel="noreferrer noopener">Twitter</a></div><div><h5>More</h5><a href="/diy-docusaurus/blog">Blog</a><a href="https://github.com/">GitHub</a><a class="github-button" data-icon="octicon-star" data-count-href="/facebook/docusaurus/stargazers" data-show-count="true" data-count-aria-label="# stargazers on GitHub" aria-label="Star this project on GitHub">Star</a></div></section><section class="copyright">Copyright © 2019 DoItYourself</section></footer></div><script type="text/javascript" src="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.js"></script><script>
                document.addEventListener('keyup', function(e) {
                  if (e.target !== document.body) {
                    return;
                  }
                  // keyCode for '/' (slash)
                  if (e.keyCode === 191) {
                    const search = document.getElementById('search_input_react');
                    search && search.focus();
                  }
                });
              </script><script>
              var search = docsearch({
                
                apiKey: 'my-api-key',
                indexName: 'my-index-name',
                inputSelector: '#search_input_react',
                algoliaOptions: {}
              });
            </script></body></html>